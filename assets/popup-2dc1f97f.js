import{m as g,c,H as k,r as p,X as O,Y as P,Z as S,K as h,w as N,o as t,$ as R,a0 as $,W as E,a1 as w,N as _}from"./index-ce7fb889.js";import{b as j}from"./styled-components.browser.esm-b4eee38b.js";import{d as x,u as B}from"./use-inner-visible-00b2e519.js";import{u as M}from"./ZComment-d3d2a23d.js";const i="adm-popup",A=Object.assign(Object.assign({},x),{closeOnSwipe:!1,position:"bottom"}),H=d=>{const e=g(A,d),u=c(`${i}-body`,e.bodyClassName,`${i}-body-position-${e.position}`),{locale:m}=k(),[n,l]=p.useState(e.visible),r=p.useRef(null);O(r,e.disableBodyScroll&&n?"strict":!1),j(()=>{e.visible&&l(!0)},[e.visible]);const f=P(),{percent:b}=S({percent:e.visible?0:100,config:{precision:.1,mass:.4,tension:300,friction:30},onRest:()=>{var o,s;f.current||(l(e.visible),e.visible?(o=e.afterShow)===null||o===void 0||o.call(e):(s=e.afterClose)===null||s===void 0||s.call(e))}}),v=M(({swipe:[,o]})=>{var s;e.closeOnSwipe&&(o===1&&e.position==="bottom"||o===-1&&e.position==="top")&&((s=e.onClose)===null||s===void 0||s.call(e))},{axis:"y",enabled:["top","bottom"].includes(e.position)}),C=B(n&&e.visible),y=h(e.stopPropagation,N(e,t.createElement("div",Object.assign({className:i,onClick:e.onClick,style:{display:n?void 0:"none",touchAction:["top","bottom"].includes(e.position)?"none":"auto"}},v()),e.mask&&t.createElement(R,{visible:C,forceRender:e.forceRender,destroyOnClose:e.destroyOnClose,onMaskClick:o=>{var s,a;(s=e.onMaskClick)===null||s===void 0||s.call(e,o),e.closeOnMaskClick&&((a=e.onClose)===null||a===void 0||a.call(e))},className:e.maskClassName,style:e.maskStyle,disableBodyScroll:!1,stopPropagation:e.stopPropagation}),t.createElement($.div,{className:u,style:Object.assign(Object.assign({},e.bodyStyle),{transform:b.to(o=>e.position==="bottom"?`translate(0, ${o}%)`:e.position==="top"?`translate(0, -${o}%)`:e.position==="left"?`translate(-${o}%, 0)`:e.position==="right"?`translate(${o}%, 0)`:"none")}),ref:r},e.showCloseButton&&t.createElement("a",{className:c(`${i}-close-icon`,"adm-plain-anchor"),onClick:()=>{var o;(o=e.onClose)===null||o===void 0||o.call(e)},role:"button","aria-label":m.common.close},t.createElement(E,null)),e.children))));return t.createElement(w,{active:n,forceRender:e.forceRender,destroyOnClose:e.destroyOnClose},_(e.getContainer,y))};export{H as P};
