import{m as z,r as d,K as H,o as p,w as J}from"./index-ce7fb889.js";import{a as j}from"./use-resize-effect-1bab2614.js";import{b as q}from"./styled-components.browser.esm-b4eee38b.js";var G;(function(e){e[e.HIGH_SURROGATE_START=55296]="HIGH_SURROGATE_START",e[e.HIGH_SURROGATE_END=56319]="HIGH_SURROGATE_END",e[e.LOW_SURROGATE_START=56320]="LOW_SURROGATE_START",e[e.REGIONAL_INDICATOR_START=127462]="REGIONAL_INDICATOR_START",e[e.REGIONAL_INDICATOR_END=127487]="REGIONAL_INDICATOR_END",e[e.FITZPATRICK_MODIFIER_START=127995]="FITZPATRICK_MODIFIER_START",e[e.FITZPATRICK_MODIFIER_END=127999]="FITZPATRICK_MODIFIER_END",e[e.VARIATION_MODIFIER_START=65024]="VARIATION_MODIFIER_START",e[e.VARIATION_MODIFIER_END=65039]="VARIATION_MODIFIER_END",e[e.DIACRITICAL_MARKS_START=8400]="DIACRITICAL_MARKS_START",e[e.DIACRITICAL_MARKS_END=8447]="DIACRITICAL_MARKS_END",e[e.SUBDIVISION_INDICATOR_START=127988]="SUBDIVISION_INDICATOR_START",e[e.TAGS_START=917504]="TAGS_START",e[e.TAGS_END=917631]="TAGS_END",e[e.ZWJ=8205]="ZWJ"})(G||(G={}));const Q=Object.freeze([776,2359,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520]);var b;function X(e){if(typeof e!="string")throw new TypeError("string cannot be undefined or null");const t=[];let o=0,n=0;for(;o<e.length;)n+=Y(o+n,e),se(e[o+n])&&n++,ne(e[o+n])&&n++,oe(e[o+n])&&n++,ce(e[o+n])?n++:(t.push(e.substring(o,o+n)),o+=n,n=0);return t}function Y(e,t){const o=t[e];if(!$(o)||e===t.length-1)return 1;const n=o+t[e+1];let f=t.substring(e+2,e+5);return L(n)&&L(f)?4:ee(n)&&re(f)?t.slice(e).indexOf(String.fromCodePoint(917631))+2:te(f)?4:2}function $(e){return e&&T(e[0].charCodeAt(0),55296,56319)}function L(e){return T(C(e),127462,127487)}function ee(e){return T(C(e),127988,127988)}function te(e){return T(C(e),127995,127999)}function ne(e){return typeof e=="string"&&T(e.charCodeAt(0),65024,65039)}function oe(e){return typeof e=="string"&&T(e.charCodeAt(0),8400,8447)}function re(e){const t=e.codePointAt(0);return typeof e=="string"&&typeof t=="number"&&T(t,917504,917631)}function se(e){return typeof e=="string"&&Q.includes(e.charCodeAt(0))}function ce(e){return typeof e=="string"&&e.charCodeAt(0)===8205}function C(e){return(e.charCodeAt(0)-55296<<10)+(e.charCodeAt(1)-56320)+65536}function T(e,t,o){return e>=t&&e<=o}(function(e){e[e.unit_1=1]="unit_1",e[e.unit_2=2]="unit_2",e[e.unit_4=4]="unit_4"})(b||(b={}));const ie="adm-ellipsis",le={direction:"end",rows:1,expandText:"",content:"",collapseText:"",stopPropagationForActionButtons:[],onContentClick:()=>{},defaultExpanded:!1},Te=e=>{const t=z(le,e),o=d.useRef(null),n=d.useRef(null),f=d.useRef(null),[O,w]=d.useState({}),[D,N]=d.useState(t.defaultExpanded),[E,h]=d.useState(!1),v=d.useMemo(()=>X(t.content),[t.content]);function u(a,A){return v.slice(a,A).join("")}function M(){var a,A;const I=o.current;if(!I)return;const K=I.style.display;I.style.display="block";const R=window.getComputedStyle(I),r=document.createElement("div");Array.prototype.slice.apply(R).forEach(i=>{r.style.setProperty(i,R.getPropertyValue(i))}),I.style.display=K,r.style.height="auto",r.style.minHeight="auto",r.style.maxHeight="auto",r.style.textOverflow="clip",r.style.whiteSpace="normal",r.style.webkitLineClamp="unset",r.style.display="block";const U=y(R.lineHeight),x=Math.floor(U*(t.rows+.5)+y(R.paddingTop)+y(R.paddingBottom));if(r.innerText=t.content,document.body.appendChild(r),r.offsetHeight<=x)h(!1);else{let _=function(s,c){if(c-s<=1)return t.direction==="end"?{leading:u(0,s)+"..."}:{tailing:"..."+u(c,i)};const l=Math.round((s+c)/2);return t.direction==="end"?r.innerHTML=u(0,l)+"..."+S:r.innerHTML=S+"..."+u(l,i),r.offsetHeight<=x?t.direction==="end"?_(l,c):_(s,l):t.direction==="end"?_(s,l):_(l,c)},m=function(s,c){if(s[1]-s[0]<=1&&c[1]-c[0]<=1)return{leading:u(0,s[0])+"...",tailing:"..."+u(c[1],i)};const l=Math.floor((s[0]+s[1])/2),g=Math.ceil((c[0]+c[1])/2);return r.innerHTML=u(0,l)+"..."+S+"..."+u(g,i),r.offsetHeight<=x?m([l,s[1]],[c[0],g]):m([s[0],l],[g,c[1]])};h(!0);const i=t.content.length,V=typeof t.collapseText=="string"?t.collapseText:(a=f.current)===null||a===void 0?void 0:a.innerHTML,Z=typeof t.expandText=="string"?t.expandText:(A=n.current)===null||A===void 0?void 0:A.innerHTML,S=D?V:Z,F=Math.floor((0+i)/2),W=t.direction==="middle"?m([0,F],[F,i]):_(0,i);w(W)}document.body.removeChild(r)}j(M,o),q(()=>{M()},[t.content,t.direction,t.rows,t.expandText,t.collapseText]);const k=E&&t.expandText?H(t.stopPropagationForActionButtons,p.createElement("a",{ref:n,onClick:()=>{N(!0)}},t.expandText)):null,B=E&&t.collapseText?H(t.stopPropagationForActionButtons,p.createElement("a",{ref:f,onClick:()=>{N(!1)}},t.collapseText)):null,P=()=>E?D?p.createElement(p.Fragment,null,t.content,B):p.createElement(p.Fragment,null,O.leading,k,O.tailing):t.content;return J(t,p.createElement("div",{ref:o,className:ie,onClick:a=>{a.target===a.currentTarget&&t.onContentClick(a)}},P()))};function y(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}export{Te as E,X as r};
