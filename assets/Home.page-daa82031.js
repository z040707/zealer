import{r as i,m as A,o as L,w as Z,c as D,S as v,j as e,V as H,a as y,T as q}from"./index-ce7fb889.js";import{I as M}from"./infinite-scroll-22c3637e.js";import{C as W,b as F,T as N}from"./input-52f9904a.js";import{G as n,I as p,S as $,c as X,A as V}from"./ZComment-d3d2a23d.js";import{I,s as z}from"./styled-components.browser.esm-b4eee38b.js";import{S}from"./index-45a08524.js";import{E as T}from"./ellipsis-5b3a1378.js";import{L as k}from"./index-f9dd01d7.js";import{P as G}from"./pull-to-refresh-a8896e03.js";import{Z as J}from"./ZImageViewer-a3eba9b0.js";import"./use-resize-effect-1bab2614.js";import"./convert-px-964282f9.js";import"./rubberband-9373f189.js";import"./index-b01732f5.js";import"./safe-area-c2e7b740.js";function K(t){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t,{style:Object.assign({verticalAlign:"-0.125em"},t.style),className:["antd-mobile-icon",t.className].filter(Boolean).join(" ")}),i.createElement("g",{id:"CheckCircleFill-CheckCircleFill",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"CheckCircleFill-编组"},i.createElement("rect",{id:"CheckCircleFill-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),i.createElement("path",{d:"M24,2 C36.1502645,2 46,11.8497355 46,24 C46,36.1502645 36.1502645,46 24,46 C11.8497355,46 2,36.1502645 2,24 C2,11.8497355 11.8497355,2 24,2 Z M35.8202936,17 L32.7086692,17 C32.6025922,17 32.500859,17.0421352 32.4258461,17.1171378 L32.4258461,17.1171378 L21.3922352,28.1492247 L16.3591562,23.1163755 C16.2841422,23.0413649 16.1824034,22.9992247 16.0763199,22.9992247 L16.0763199,22.9992247 L12.9653996,22.9992247 C12.859342,22.9992247 12.7576259,23.0413445 12.6826161,23.1163228 C12.5263737,23.2724998 12.5263207,23.5257658 12.6824977,23.6820082 C12.8583452,23.8579294 13.0341927,24.0338505 13.2100402,24.2097716 C13.2577488,24.2575002 13.3065097,24.3063074 13.3562592,24.3561283 L13.6661084,24.6666997 C14.3074913,25.3100963 15.0728595,26.0807873 15.8520136,26.8666654 L16.4372421,27.4571699 C18.2552812,29.2922548 19.9983838,31.0574343 20.2666114,31.3285298 L20.301004,31.3632341 C20.8867904,31.9490205 21.8365379,31.9490205 22.4223243,31.3632341 L22.4223243,31.3632341 L36.1031319,17.6828471 C36.1781492,17.6078322 36.2202936,17.5060887 36.2202936,17.4 C36.2202936,17.1790861 36.0412075,17 35.8202936,17 L35.8202936,17 Z",id:"CheckCircleFill-形状结合",fill:"currentColor",fillRule:"nonzero"}))))}function Q(t){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t,{style:Object.assign({verticalAlign:"-0.125em"},t.style),className:["antd-mobile-icon",t.className].filter(Boolean).join(" ")}),i.createElement("g",{id:"ClockCircleFill-ClockCircleFill",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"ClockCircleFill-编组"},i.createElement("rect",{id:"ClockCircleFill-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),i.createElement("path",{d:"M24,2 C36.1502645,2 46,11.8497355 46,24 C46,36.1502645 36.1502645,46 24,46 C11.8497355,46 2,36.1502645 2,24 C2,11.8497355 11.8497355,2 24,2 Z M24.6,14 L22.4,14 C22.1790861,14 22,14.1790861 22,14.4 L22,14.4 L22,23.1715729 L22.0065089,23.3850222 C22.0584325,24.2354066 22.4192395,25.0405598 23.0251263,25.6464466 L23.0251263,25.6464466 L31.1564971,33.7778175 C31.3127068,33.9340272 31.5659728,33.9340272 31.7221825,33.7778175 L31.7221825,33.7778175 L33.2778175,32.2221825 C33.4340272,32.0659728 33.4340272,31.8127068 33.2778175,31.6564971 L33.2778175,31.6564971 L25.1464466,23.5251263 L25.0952092,23.4650801 C25.0337142,23.38027 25,23.2776595 25,23.1715729 L25,23.1715729 L25,14.4 C25,14.1790861 24.8209139,14 24.6,14 L24.6,14 Z",id:"ClockCircleFill-形状结合",fill:"currentColor",fillRule:"nonzero"}))))}function U(t){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t,{style:Object.assign({verticalAlign:"-0.125em"},t.style),className:["antd-mobile-icon",t.className].filter(Boolean).join(" ")}),i.createElement("g",{id:"ExclamationCircleFill-ExclamationCircleFill",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",null,i.createElement("rect",{id:"ExclamationCircleFill-矩形",fill:"#D76060",opacity:0,x:0,y:0,width:48,height:48}),i.createElement("path",{d:"M24,2 C36.1502645,2 46,11.8497355 46,24 C46,36.1502645 36.1502645,46 24,46 C11.8497355,46 2,36.1502645 2,24 C2,11.8497355 11.8497355,2 24,2 Z M25.1,31 L22.9,31 C22.6790861,31 22.5,31.1790861 22.5,31.4 L22.5,31.4 L22.5,33.6 C22.5,33.8209139 22.6790861,34 22.9,34 L22.9,34 L25.1,34 C25.3209139,34 25.5,33.8209139 25.5,33.6 L25.5,33.6 L25.5,31.4 C25.5,31.1790861 25.3209139,31 25.1,31 L25.1,31 Z M25.1,14 L22.9,14 C22.6790861,14 22.5,14.1790861 22.5,14.4 L22.5,14.4 L22.5,27.6 C22.5,27.8209139 22.6790861,28 22.9,28 L22.9,28 L25.1,28 C25.3209139,28 25.5,27.8209139 25.5,27.6 L25.5,27.6 L25.5,14.4 C25.5,14.1790861 25.3209139,14 25.1,14 L25.1,14 Z",id:"ExclamationCircleFill-形状结合",fill:"currentColor",fillRule:"nonzero"}))))}function Y(t){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t,{style:Object.assign({verticalAlign:"-0.125em"},t.style),className:["antd-mobile-icon",t.className].filter(Boolean).join(" ")}),i.createElement("g",{id:"InformationCircleFill-InformationCircleFill",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"InformationCircleFill-编组"},i.createElement("rect",{id:"InformationCircleFill-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),i.createElement("path",{d:"M24,2 C36.1502645,2 46,11.8497355 46,24 C46,36.1502645 36.1502645,46 24,46 C11.8497355,46 2,36.1502645 2,24 C2,11.8497355 11.8497355,2 24,2 Z M25.6,20 L21.4,20 C21.1790861,20 21,20.1790861 21,20.4 L21,20.4 L21,22.6 C21,22.8209139 21.1790861,23 21.4,23 L21.4,23 L22.6,23 C22.8209139,23 23,23.1790861 23,23.4 L23,23.4 L23,34.6 C23,34.8209139 23.1790861,35 23.4,35 L23.4,35 L25.6,35 C25.8209139,35 26,34.8209139 26,34.6 L26,34.6 L26,20.4 C26,20.1790861 25.8209139,20 25.6,20 L25.6,20 Z M25.6,14 L23.4,14 C23.1790861,14 23,14.1790861 23,14.4 L23,14.4 L23,16.6 C23,16.8209139 23.1790861,17 23.4,17 L23.4,17 L25.6,17 C25.8209139,17 26,16.8209139 26,16.6 L26,16.6 L26,14.4 C26,14.1790861 25.8209139,14 25.6,14 L25.6,14 Z",id:"InformationCircleFill-形状结合",fill:"currentColor",fillRule:"nonzero"}))))}const w="adm-result",ee={success:K,error:W,info:Y,waiting:Q,warning:U},te={status:"info"},B=t=>{const c=A(te,t),{status:d,title:r,description:a,icon:x}=c;if(!d)return null;const o=x||L.createElement(ee[d]);return Z(c,L.createElement("div",{className:D(w,`${w}-${d}`)},L.createElement("div",{className:`${w}-icon`},o),L.createElement("div",{className:`${w}-title`},r),!!a&&L.createElement("div",{className:`${w}-description`},a)))},ie=()=>v({method:"POST",url:"/topic/square"}),se=()=>v({method:"POST",url:"/home/banner"}),P=t=>v({method:"POST",url:"/content/recommend",data:t}),ne=t=>v({method:"POST",url:"/topic/contentlist",data:t});function _(){return e.jsx(H,{style:{height:"100%",width:"50%",margin:"auto"}})}function le(){const t=y(),{data:c=[],error:d,loading:r}=F(se);return e.jsx(e.Fragment,{children:d?e.jsx(B,{status:"error",title:"获取轮播图数据失败",description:"请检查网络后，尝试刷新"}):r?e.jsx(_,{}):e.jsx(S,{autoplay:!0,loop:!0,children:c.map(a=>e.jsx(S.Item,{children:e.jsx(I,{lazy:!0,style:{"--height":"150px"},src:a.img,alt:a.title,onClick:()=>t("#")})},a.id))})})}const ae=z.div`
  .userInfo {
    font-size: 12px;
    .userInfo-nickname {
      font-size: 14px;
      color: #00000ae0;
    }
    .userInfo-title {
      color: #00000a4d;
    }
  }
  .body {
    .adm-ellipsis {
      font-size: 14px;
      color: #00000acc;
      line-height: 28px;
      padding: 5px 0;
    }
  }
  .status {
    text-align: center;
    span {
      padding: 0 5px;
    }
  }
  .well {
    border-radius: 24px;
    margin: 12px 8px 0 0;
    padding: 4px 10px 4px 8px;
    background: #f2f2f7;
    text-align: center;
    width: 90px;
    font-size: 12px;
    span {
      margin: 0 2px;
    }
  }
`;function re(){const t=y(),[c,d]=i.useState(!0);let{data:r={},runAsync:a}=F(s=>P(s),{manual:!0});const[x,o]=i.useState(1),[f,m]=i.useState([]);async function C(){await a({lastRecord:r.lastRecord,pageNum:x,pageSize:5}).then(({list:s})=>{m(j=>[...j,...s]),o(x+1),d(s.length>0)})}return e.jsx(ae,{children:e.jsxs(G,{onRefresh:async()=>{await a({lastRecord:0,pageNum:1,pageSize:5}).then(({list:s})=>m(s))},children:[e.jsx(k,{children:f.map(s=>{let{id:j,userInfo:h,title:R,picture:E,groupInfo:b}=s;return e.jsx(k.Item,{arrow:!1,title:e.jsx("div",{className:"userInfo",children:e.jsxs(n,{columns:8,children:[e.jsx(n.Item,{onClick:()=>t("/user/home/"+h.uid),children:e.jsx(I,{lazy:!0,src:h.profile_image,style:{borderRadius:"50%","--height":"34px","--width":"34px"}})}),e.jsxs(n.Item,{span:7,children:[e.jsx("div",{className:"userInfo-nickname",children:h.nickname}),e.jsx("div",{className:"userInfo-title",children:h.title})]})]})}),children:e.jsxs("div",{className:"body",children:[e.jsx(T,{direction:"end",rows:2,content:R,onContentClick:()=>t("/detail/detail/"+s.cid+"/1")}),e.jsxs(n,{columns:3,gap:12,children:[E.map((l,g)=>e.jsx(n.Item,{children:e.jsx(J,{src:l.pic_url,alt:l.text,width:112,height:112,image:l.pic_url})},g)),e.jsx(n.Item,{span:3,onClick:()=>t("/topic/detail/"+b.id),children:e.jsxs("div",{className:"well",children:[e.jsx(p,{type:"well",size:12,color:"#fc0"}),s.groupName]})}),e.jsxs(n.Item,{className:"status",children:[e.jsx(p,{type:"share",size:16}),s.share_num==0?"":s.share_num]}),e.jsxs(n.Item,{className:"status",children:[e.jsx(p,{type:"message",size:16}),s.comments_num==0?"":s.comments_num]}),e.jsxs(n.Item,{className:"status",children:[e.jsx(p,{type:"heart",size:16}),s.praise_num==0?"":s.praise_num]})]})]})},j)})}),e.jsx(M,{loadMore:()=>C(),hasMore:c})]})})}const oe=z.div`
  .userInfo {
    font-size: 12px;
    .userInfo-nickname {
      font-size: 14px;
      color: #00000ae0;
    }
    .userInfo-title {
      color: #00000a4d;
    }
  }
  .body {
    .adm-ellipsis {
      font-size: 14px;
      color: #00000acc;
      line-height: 28px;
      padding: 5px 0;
    }
  }
  .status {
    text-align: center;
    span {
      padding: 0 5px;
    }
  }
  .well {
    border-radius: 24px;
    margin: 12px 8px 0 0;
    padding: 4px 10px 4px 8px;
    background: #f2f2f7;
    text-align: center;
    width: 90px;
    font-size: 12px;
    span {
      margin: 0 2px;
    }
  }
`;function ce(t){const c=y();let{listDatas:d}=t;return e.jsx(oe,{children:e.jsx(k,{children:d.map((r,a)=>{let{id:x,userInfo:o,title:f,picture:m}=r;return e.jsx(k.Item,{title:e.jsx("div",{className:"userInfo",children:e.jsxs(n,{columns:8,children:[e.jsx(n.Item,{children:e.jsx(I,{lazy:!0,fit:"cover",src:o.profile_image,style:{borderRadius:"50%","--height":"34px","--width":"34px"},onClick:()=>c("/user/home/"+o.uid)})}),e.jsxs(n.Item,{span:7,children:[e.jsx("div",{className:"userInfo-nickname",children:o.nickname}),e.jsx("div",{className:"userInfo-title",children:o.title})]})]})}),children:e.jsxs("div",{className:"body",children:[e.jsx(T,{direction:"end",rows:2,content:f,onContentClick:()=>c("/detail/detail/"+r.cid+"/1")}),e.jsxs(n,{columns:3,gap:12,children:[m.map((C,s)=>e.jsx(n.Item,{children:e.jsx(I,{lazy:!0,src:C.pic_url,alt:C.text,style:{"--height":"112px","--width":"112px"}})},s)),e.jsx(n.Item,{span:3}),e.jsxs(n.Item,{className:"status",children:[e.jsx(p,{type:"share",size:16}),r.share_num]}),e.jsxs(n.Item,{className:"status",children:[e.jsx(p,{type:"message",size:16}),r.user_top]}),e.jsxs(n.Item,{className:"status",children:[e.jsx(p,{type:"heart",size:16}),r.praise_num]})]})]})},a)})})})}const de=z.div`
  height: 100%;
  position: relative;
  .appIcon {
    z-index: 10;
    position: absolute;
    top: 0;
    right: 0;
    padding-right: 10px;
    background-color: #fff;
    display: block;
    height: 38px;
    line-height: 38px;
  }
  .tabs {
    position: relative;
    .adm-tabs-header {
      padding-right: 28px;
      position: absolute;
      top: 0;
      z-index: 1;
      background-color: #fff;
    }
    .adm-tabs-content {
      padding: 40px 0 0;
      height: 86vh;
      overflow-y: auto;
    }
  }
  .adm-tabs-tab-active {
    background: #78788014;
    border-radius: 14px;
    padding: 0 14px;
  }
`;function ye(){const t=y(),[c,d]=i.useState(1),[r,a]=i.useState(!0),[x,o]=i.useState(0),[f,m]=i.useState([]),{data:C=[],error:s,loading:j}=F(ie),{runAsync:h,data:R}=F(l=>ne(l),{manual:!0});async function E(l){switch(l){default:await h({lastRecord:x,pageNum:c,pageSize:5,topicId:l,orderType:0}).then(({lastRecord:g,list:u})=>{a(u.length>0),m(O=>[...O,...u]),o(g)}).catch(()=>q.show({icon:"fail",content:"获取数据失败，请检查网络连接后重试"}));break}o(0),d(c+1)}async function b(l){switch(l){case"0":await P({lastRecord:0,pageNum:1,pageSize:5}).then(({lastRecord:g,list:u})=>{o(g),m(u),a(u.length>0)});break;default:await h({lastRecord:0,pageNum:1,pageSize:5,topicId:l,orderType:0}).then(({lastRecord:g,list:u})=>{o(g),m(u),a(u.length>0)});break}d(2)}return e.jsx(de,{children:e.jsx($,{header:e.jsx(X,{}),children:s?e.jsx(B,{status:"error",title:"获取导航栏数据失败",description:"请检查网络后，尝试刷新"}):j?e.jsx(_,{}):e.jsxs(e.Fragment,{children:[e.jsxs(N,{className:"tabs",activeLineMode:"none",onChange:l=>b(l),children:[e.jsxs(N.Tab,{title:"推荐",children:[e.jsx(le,{}),e.jsx(re,{})]},"0"),C.map(l=>e.jsxs(N.Tab,{title:l.name,children:[e.jsx(ce,{listDatas:f}),e.jsx(M,{loadMore:()=>E(l.id),hasMore:r})]},l.id))]}),e.jsx("div",{className:"appIcon",onClick:()=>t("/search"),children:e.jsx(p,{type:"app"})}),e.jsx(V,{onClick:()=>t("/user/addActive")})]})})})}export{ye as default};
