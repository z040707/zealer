import{Z as O,r as p,o as n,a0 as E,c as v,w as S,a1 as W,m as j,Y as q,X as G,K as U,$ as Z,W as X,N as Y,R as L,P as T,a4 as H,aa as I,j as c,T as P}from"./index-ce7fb889.js";import{a as J,B as x,u as Q}from"./use-resize-effect-1bab2614.js";import{d as ee,c as te,t as se,u as ae,b as g,I as _,T as N}from"./input-52f9904a.js";import{b as z,c as ne,I as K,s as oe}from"./styled-components.browser.esm-b4eee38b.js";import{u as le,a as D,L as R}from"./index-f9dd01d7.js";import{E as $,d as ce,p as re,e as ie,f as de}from"./mine.api-e455d4a9.js";import{S as ue}from"./space-64d7cbdc.js";import{d as me,u as fe}from"./use-inner-visible-00b2e519.js";const pe=(t,e)=>{const[{scrollLeft:o},i]=O(()=>({scrollLeft:0,config:{tension:300,clamp:!0}}));function a(u=!1){const r=t.current;if(!r||e===void 0)return;const f=r.children.item(e).children.item(0),y=f.offsetLeft,l=f.offsetWidth,s=r.offsetWidth,d=r.scrollWidth,k=r.scrollLeft;if(d-s<=0)return;const F=te(y-(s-l)/2,0,d-s);i.start({scrollLeft:F,from:{scrollLeft:k},immediate:u&&!o.isAnimating})}return z(()=>{a(!0)},[]),ne(()=>{a()},[e]),ee(()=>{a(!0)},t,{subtree:!0,childList:!0,characterData:!0}),{scrollLeft:o,animate:a}};const C="adm-scroll-mask",ye=t=>{const e=p.useRef(null),[{leftMaskOpacity:o,rightMaskOpacity:i},a]=O(()=>({leftMaskOpacity:0,rightMaskOpacity:0,config:{clamp:!0}})),{run:u}=le((r=!1)=>{if(!e.current)return;const f=t.scrollTrackRef.current;if(!f)return;const y=f.scrollLeft,l=y>0,s=y+f.offsetWidth<f.scrollWidth;a.start({leftMaskOpacity:l?1:0,rightMaskOpacity:s?1:0,immediate:r})},{wait:100,trailing:!0,leading:!0});return p.useEffect(()=>{u(!0)},[]),p.useEffect(()=>{const r=t.scrollTrackRef.current;if(r)return r.addEventListener("scroll",u),()=>r.removeEventListener("scroll",u)},[]),n.createElement(n.Fragment,null,n.createElement(E.div,{ref:e,className:v(C,`${C}-left`),style:{opacity:o}}),n.createElement(E.div,{className:v(C,`${C}-right`),style:{opacity:i}}))},b="adm-capsule-tabs",ve=()=>null,he=t=>{var e;const o=p.useRef(null),i=p.useRef(null),a={};let u=null;const r=[];se(t.children,(s,d)=>{if(!p.isValidElement(s))return;const k=s.key;if(typeof k!="string")return;d===0&&(u=k);const M=r.push(s);a[k]=M-1});const[m,f]=ae({value:t.activeKey,defaultValue:(e=t.defaultActiveKey)!==null&&e!==void 0?e:u,onChange:s=>{var d;s!==null&&((d=t.onChange)===null||d===void 0||d.call(t,s))}}),{scrollLeft:y,animate:l}=pe(o,a[m]);return J(()=>{l(!0)},i),S(t,n.createElement("div",{className:b,ref:i},n.createElement("div",{className:`${b}-header`},n.createElement(ye,{scrollTrackRef:o}),n.createElement(E.div,{className:`${b}-tab-list`,ref:o,scrollLeft:y},r.map(s=>S(s.props,n.createElement("div",{key:s.key,className:`${b}-tab-wrapper`},n.createElement("div",{onClick:()=>{const{key:d}=s;s.props.disabled||d!=null&&f(d.toString())},className:v(`${b}-tab`,{[`${b}-tab-active`]:s.key===m,[`${b}-tab-disabled`]:s.props.disabled})},s.props.title)))))),r.map(s=>{if(s.props.children===void 0)return null;const d=s.key===m;return n.createElement(W,{key:s.key,active:d,forceRender:s.props.forceRender,destroyOnClose:s.props.destroyOnClose},n.createElement("div",{className:`${b}-content`,style:{display:d?"block":"none"}},s.props.children))})))},B=D(he,{Tab:ve});const be=Object.assign(Object.assign({},me),{getContainer:null}),ke=t=>{const e=j(be,t),o=q(),i=O({scale:e.visible?1:.8,opacity:e.visible?1:0,config:{mass:1.2,tension:200,friction:25,clamp:!0},onRest:()=>{var l,s;o.current||(u(e.visible),e.visible?(l=e.afterShow)===null||l===void 0||l.call(e):(s=e.afterClose)===null||s===void 0||s.call(e))}}),[a,u]=p.useState(e.visible);z(()=>{e.visible&&u(!0)},[e.visible]);const r=p.useRef(null);G(r,e.disableBodyScroll&&a);const m=fe(a&&e.visible),f=n.createElement("div",{className:v("adm-center-popup-body",e.bodyClassName),style:e.bodyStyle},e.children),y=U(e.stopPropagation,S(e,n.createElement("div",{className:"adm-center-popup",style:{display:a?void 0:"none",pointerEvents:a?void 0:"none"}},e.mask&&n.createElement(Z,{visible:m,forceRender:e.forceRender,destroyOnClose:e.destroyOnClose,onMaskClick:l=>{var s,d;(s=e.onMaskClick)===null||s===void 0||s.call(e,l),e.closeOnMaskClick&&((d=e.onClose)===null||d===void 0||d.call(e))},style:e.maskStyle,className:v("adm-center-popup-mask",e.maskClassName),disableBodyScroll:!1,stopPropagation:e.stopPropagation}),n.createElement("div",{className:"adm-center-popup-wrap",role:e.role,"aria-label":e["aria-label"]},n.createElement(E.div,{style:i,ref:r},e.showCloseButton&&n.createElement("a",{className:v("adm-center-popup-close","adm-plain-anchor"),onClick:()=>{var l;(l=e.onClose)===null||l===void 0||l.call(e)}},n.createElement(X,null)),f)))));return n.createElement(W,{active:a,forceRender:e.forceRender,destroyOnClose:e.destroyOnClose},Y(e.getContainer,y))};const ge=t=>{const{action:e}=t;return S(t.action,n.createElement(x,{key:e.key,onClick:t.onAction,className:v("adm-modal-button",{"adm-modal-button-primary":t.action.primary}),fill:t.action.primary?"solid":"none",size:t.action.primary?"large":"middle",block:!0,color:e.danger?"danger":"primary",loading:"auto",disabled:e.disabled},e.text))},Ce={actions:[],closeOnAction:!1,closeOnMaskClick:!1,getContainer:null},V=t=>{const e=j(Ce,t),o=n.createElement(n.Fragment,null,!!e.image&&n.createElement("div",{className:h("image-container")},n.createElement(K,{src:e.image,alt:"modal header image",width:"100%"})),!!e.header&&n.createElement("div",{className:h("header")},n.createElement(L,null,e.header)),!!e.title&&n.createElement("div",{className:h("title")},e.title),n.createElement("div",{className:h("content")},typeof e.content=="string"?n.createElement(L,null,e.content):e.content),n.createElement(ue,{direction:"vertical",block:!0,className:v(h("footer"),e.actions.length===0&&h("footer-empty"))},e.actions.map((i,a)=>n.createElement(ge,{key:i.key,action:i,onAction:()=>T(void 0,void 0,void 0,function*(){var u,r,m;yield Promise.all([(u=i.onClick)===null||u===void 0?void 0:u.call(i),(r=e.onAction)===null||r===void 0?void 0:r.call(e,i,a)]),e.closeOnAction&&((m=e.onClose)===null||m===void 0||m.call(e))})}))));return n.createElement(ke,{className:v(h(),e.className),style:e.style,afterClose:e.afterClose,afterShow:e.afterShow,showCloseButton:e.showCloseButton,closeOnMaskClick:e.closeOnMaskClick,onClose:e.onClose,visible:e.visible,getContainer:e.getContainer,bodyStyle:e.bodyStyle,bodyClassName:v(h("body"),e.image&&h("with-image"),e.bodyClassName),maskStyle:e.maskStyle,maskClassName:e.maskClassName,stopPropagation:e.stopPropagation,disableBodyScroll:e.disableBodyScroll,destroyOnClose:e.destroyOnClose,forceRender:e.forceRender},o)};function h(t=""){return"adm-modal"+(t&&"-")+t}const w=new Set;function A(t){const e=H(n.createElement(V,Object.assign({},t,{afterClose:()=>{var o;w.delete(e.close),(o=t.afterClose)===null||o===void 0||o.call(t)}})));return w.add(e.close),e}function xe(t){const e={confirmText:I().locale.Modal.ok},o=j(e,t);return new Promise(i=>{A(Object.assign(Object.assign({},o),{closeOnAction:!0,actions:[{key:"confirm",text:o.confirmText,primary:!0}],onAction:o.onConfirm,onClose:()=>{var a;(a=o.onClose)===null||a===void 0||a.call(o),i()}}))})}const Ee={confirmText:"确认",cancelText:"取消"};function Se(t){const{locale:e}=I(),o=j(Ee,{confirmText:e.common.confirm,cancelText:e.common.cancel},t);return new Promise(i=>{A(Object.assign(Object.assign({},o),{closeOnAction:!0,onClose:()=>{var a;(a=o.onClose)===null||a===void 0||a.call(o),i(!1)},actions:[{key:"confirm",text:o.confirmText,primary:!0,onClick:()=>T(this,void 0,void 0,function*(){var a;yield(a=o.onConfirm)===null||a===void 0?void 0:a.call(o),i(!0)})},{key:"cancel",text:o.cancelText,onClick:()=>T(this,void 0,void 0,function*(){var a;yield(a=o.onCancel)===null||a===void 0?void 0:a.call(o),i(!1)})}]}))})}function je(){w.forEach(t=>{t()})}const Ne=D(V,{show:A,alert:xe,confirm:Se,clear:je}),Re=oe.div``,$e=()=>{p.useState([]);const[t,e]=p.useState(0),[o,i]=p.useState("");p.useState("");const{runAsync:a,data:u=[]}=g(l=>ce(l),{manual:!0}),{runAsync:r}=g(re,{manual:!0}),{runAsync:m}=g(l=>ie(l),{manual:!0}),{runAsync:f}=g(l=>de(l),{manual:!0});Q(async()=>{await a({uid:0})});const y=[{title:"作品",k:1},{title:"动态",k:2},{title:"点评",k:3},{title:"喜欢",k:4}];return c.jsxs(Re,{children:[c.jsxs("div",{className:"header",children:[c.jsx("div",{className:"h-img",children:c.jsx(K,{lazy:!0,style:{"--height":"79px","--width":"79px",borderRadius:"50%",margin:"40px auto 10px"},src:"	https://zaaap-1254235226.cos.ap-guangzhou.myqcloud.com/default/user/cover.png"})}),c.jsx("div",{className:"h-btn",style:{textAlign:"center"},children:c.jsx(x,{color:"warning",size:"large",style:{padding:"10px 30px"},onClick:async()=>{await r().then(l=>Ne.show({title:"短信验证码登录",content:c.jsxs("div",{children:[c.jsxs(R,{children:[c.jsx(R.Item,{prefix:"+86",children:c.jsx(_,{onChange:s=>{i(s)},clearable:!0})}),c.jsx(R.Item,{extra:c.jsx(x,{onClick:async()=>{await m({mobile:14534588777,area_code:86,sms_type:1,type:5}).catch(()=>P.show({content:"请使用第三方登录"}))},children:"发送验证码"}),children:c.jsx(_,{})})]}),c.jsx(x,{block:!0,color:"warning",onClick:async()=>await f({mobile:14534588777,area_code:86,code:1111,source:"wxapp"}).catch(()=>P.show({content:"验证码错误"})),children:"登录"}),c.jsxs("div",{style:{fontSize:"12px",color:"#b2b2b5",textAlign:"center",marginTop:"10px"},children:["若您的微信手机号未注册，将为您直接注册",c.jsx("br",{}),"登录注册即同意ZEALER",c.jsx("a",{children:"用户协议"}),"和",c.jsx("a",{children:"隐私政策"})]})]}),closeOnAction:!0,actions:[],closeOnMaskClick:!0}))},children:"登录"})})]}),c.jsxs(N,{onChange:l=>{e(l)},children:[y.map(l=>c.jsx(N.Tab,{title:l.title,children:c.jsx($,{status:"empty"})},l.k)),c.jsx(N.Tab,{title:"产品",children:c.jsx(B,{children:u.map(l=>c.jsx(B.Tab,{title:l.name,children:c.jsx($,{status:"empty"})},l.type))})},5)]})]})};export{$e as default};
